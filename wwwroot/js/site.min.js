function createPaging(n,t,i){var u="",r;if(t>n){var e=1,o=n,f=Math.floor(n/2);for(i>2&&i<=t-f&&(e=parseInt(i)-f,o=parseInt(i)+f),i>t-f&&(e=t-n+1,o=t),u+=createLeftButton(r,i,"double-left"),u+=createLeftButton(r,i,"left"),r=e;r<=o;r++)u+=createButton(r,i);u+=createRightButton(r,i,"right",t);u+=createRightButton(r,i,"double-right",t)}else for(r=1;r<=t;r++)u+=createButton(r,i);return u}function createLeftButton(n,t,i){var r="";return 1!=t&&(r=getBase().replace("{act?}","").replace("{pag}",i=="double-left"?1:parseInt(t)-1).replace("{pag}",'<span class="fa fa-angle-'+i+' fa-color-black"><\/span>')),r}function createRightButton(n,t,i,r){var u="";return r!=t&&(u=getBase().replace("{act?}","").replace("{pag}",i=="double-right"?r:parseInt(t)+1).replace("{pag}",'<span class="fa fa-angle-'+i+' fa-color-black"><\/span>')),u}function createButton(n,t){return getBase().replace("{act?}",n==t?" active":"").replace("{pag}",n).replace("{pag}",n)}function getBase(){return'<button type="button" class="btn {act?}" onclick="init({pag})">{pag}<\/button>'}function redirect(n){var t=$(n).data("controller"),i=$(n).data("action"),r=$(n).data("currentid");window.location.href=pathBase+getURL([t,i,r])}function calcularDetallePago(){var i;referencias=[];var r=$("#TipoMonedaId").val(),n=0,t=0;$("#referencias tbody tr").each(function(){let h=$(this).find(positions.fecha).find("input").val(),c=$(this).find(positions.fecha).attr("id-source"),l=$(this).find(positions.tipo_pago).find("a").editable("getValue").tipo_pago_id,a=$(this).find(positions.banco).find("a").editable("getValue").id_banco,f=$(this).find(positions.monto_efectivo).find("a").editable("getValue").monto_efectivo,e=$(this).find(positions.monto_cheq).find("a").editable("getValue").monto_cheq,o=$(this).find(positions.monto_minu).find("a").editable("getValue").monto_minu,s=$(this).find(positions.monto_trans).find("a").editable("getValue").monto_trans,v=$(this).find(positions.referencia).find("a").editable("getValue").referencia,u=$(this).find(positions.tasa_cambio).find("a").editable("getValue").tipo_cambio;var i=parseFloat(f)+parseFloat(o)+parseFloat(e)+parseFloat(s);r==context.tipoMoneda.cordoba?(n=i,t=parseFloat(i)/parseFloat(u),$(this).find(positions.totalC).html(numeral(n).format("$0,0.0000")),$(this).find(positions.totalD).html(numeral(t).format("$0,0.0000"))):(n=parseFloat(i)*parseFloat(u),t=i,$(this).find(positions.totalC).html(numeral(n).format("$0,0.0000")),$(this).find(positions.totalD).html(numeral(t).format("$0,0.0000")));referencias.push({idSource:c,TipoPagoId:l,fecha:h,IdBanco:a,MontoEfectivo:parseFloat(f),MontoMinu:parseFloat(o),MontoCheq:parseFloat(e),MontoTrans:parseFloat(s),referencia:v,totalD:t,totalC:n,TipoCambioManual:u})});i=referencias.reduce(function(n,t){return+n+ +t.totalD},0);$(".amountsDetalle li:eq(0)").html('<span class="pull-left"><strong>Referencias<\/strong> : <\/span><strong>'+referencias.length+" items<\/strong>");$(".amountsDetalle li:eq(1)").html('<span class="pull-left">Total Dólares : <\/span><strong> $ '+numeral(i).format("$0,0.0000")+"<\/strong>")}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function generateUUID(){var n=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})}var getURL,findTypeOfficial,compareOr;(function(n){n.fn.datatable=function(t){var i=n.extend({columnsHead:null,columnsDisplay:null,data:null,pag:0,rows:0,totalRows:0,controller:null,id:null,callback:"redirect",columnsWithFormatDate:[],columnsWithFormatMoney:[]},t);return this.each(function(){var c=n(this),o,f,t,r,e;let u=parseInt(i.rows),s=parseInt(i.pag);if(o="<thead><tr>",n.each(i.columnsHead,function(n,t){o+="<th>"+t+"<\/th>"}),o+="<\/tr><\/thead>",f="<tbody>",t="",i.data.length||(t='<td colspan = "'+i.columnsDisplay.length+'"><div class="alert alert-warning text-center" role="alert">No se encontraron registros<\/div><td>',f+="<tr>"+t+"<\/tr>"),n.each(i.data,function(r,u){t="";n.each(i.columnsDisplay,function(r,f){var e,o;f.type?(e="",n.each(f.buttons,function(n,t){t=="edit"&&(e+='<a href="#" class ="btn btn-primary btn-xs"  data-tooltip="Editar" onclick="'+i.callback+'(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="edit"   data-currentid="'+u[i.id]+'" >  <i style="color:white" class="fa fa-pencil"><\/i><\/a> ');t=="remove"&&(e+='<a href="#" class ="btn btn-danger btn-xs"   data-tooltip="Eliminar" onclick="'+i.callback+'(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="delete" data-currentid="'+u[i.id]+'"><i style="color:white" class="fa fa-remove"><\/i><\/a> ');t=="otherAction"&&(e+='<a href="#" class ="btn btn-danger btn-xs"   onclick="'+i.callback+'(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="EditRols" data-currentid="'+u[i.id]+'"><i style="color:white" class="fa fa-list"><\/i><\/a> ');t=="anular"&&(e+='<a href="#" class ="btn btn-danger btn-xs"   data-tooltip="Anular" onclick="anular(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="EditRols" data-currentid="'+u[i.id]+'"><i style="color:white" class="fa fa-remove"><\/i><\/a> ');t=="print"&&(e+='<a href="#" class ="btn btn-primary btn-xs"  data-tooltip="Imprimir" onclick="printReportById('+u[i.id]+');" data-controller="'+(i.controller?i.controller:"")+'"><i style="color:white" class="fa fa-print"><\/i><\/a> ')}),t+="<td>"+e+"<\/td>"):i.columnsWithFormatMoney.includes(f)?t+='<td class="text-right text-money">'+numeral(u[f]).format("$0,0.00")+"<\/td>":i.columnsWithFormatDate.includes(f)?t+="<td>"+moment(u[f]).format("DD-MM-YYYY")+"<\/td>":(o="",f=="Estado"&&(u[f]=="Registrado"&&(o="text-primary"),u[f]=="Anulado"&&(o="text-danger")),f=="NumRecibo"&&(o="text-bold"),t+='<td class="'+o+'">'+u[f]+"<\/td>")});f+="<tr>"+t+"<\/tr>"}),f+="<\/tbody>",r=i.totalRows,totalPages=r%u>0?Math.floor(r/u)+1:r/u,e="",r>u){var l=s*u-(u-1),h=s*u,a='<p style="float:left;">Montrando de '+l+" a "+(r<h?r:h)+" de unos "+r+"<\/p>";e+='<tfoot><tr><td colspan="'+i.columnsHead.length+'">'+a+'<div class="btn-group" role="group" aria-label="..." style="float:right;">';e+=createPaging(5,totalPages,i.pag)}e+="<\/div><\/td><\/tr><\/tfoot>";n(c).html(o+f+e)})}})(jQuery);getURL=n=>n.join("/"),function(n){n.fn.addNewReference=function(t){return this.each(function(){var u=new Date,f=u.getTime(),e=n(this);n(e).find("tbody").append("<tr><td id-source="+f+'><input type="text" placeholder="dd-mm-aaaa" class="datepicker selectorFecha" value="'+(t?moment(t.Fecha).format("DD-MM-YYYY"):"")+'"/><\/td><td><a data-value="'+(t?t.TipoPagoId:"")+'" class="teditable2 tipo_pago_id" href="#" data-type="select" data-name="tipo_pago_id" data-pk="1" data-title="Tipo de pago"><\/a><\/td><td><a data-value="'+(t?t.IdBanco:"")+'" class="editable2 id_banco" href="#" data-type="select" data-name="id_banco" data-pk="1" data-title="Banco"><\/a><\/td><td><a data-value="'+(t?t.Referencia:"")+'" class="editable2 selectorReferencia" href="#" data-name="referencia" data-original-title="Ingrese la referencia"><\/a><\/td><td class="text-right"><a data-value="'+(t?t.MontoEfectivo:"0.00")+'" class="editable2 monto_efectivo" href="#" data-name="monto_efectivo" data-original-title="Monto efectivo">0.00<\/a><\/td><td class="text-right"><a data-value="'+(t?t.MontoCheq:"0.00")+'" class="editable2 monto_cheq" href="#" data-name="monto_cheq" data-original-title="Monto del cheque">0.00<\/a><\/td><td class="text-right"><a data-value="'+(t?t.MontoMinu:"0.00")+'" class="editable2 monto_minu" href="#" data-name="monto_minu" data-original-title="Monto de la minuta">0.00<\/a><\/td><td class="text-right"><a data-value="'+(t?t.MontoTrans:"0.00")+'" class="editable2 monto_trans" href="#" data-name="monto_trans" data-original-title="Monto de la transferencia">0.00<\/a><\/td><td class="text-right"><a data-value="'+(t?t.TipoCambio:"0.00")+'" class="editable2 tipo_cambio" href="#" data-name="tipo_cambio" data-original-title="Tasa de cambio">0.00<\/a><\/td><td class="text-right">0.00<\/td><td class="text-right">0.00<\/td><td><a class="fa fa-remove fa-color-red a-type-cursor" onclick="removeReferencia(this);"><\/a><\/td><\/tr>');n(".tipo_pago_id").editable({emptytext:"Seleccione",source:[{value:1,text:"Efectivo"},{value:2,text:"Cheque"},{value:3,text:"Minuta"},{value:4,text:"Transferencia"}],validate:function(t){if(n.trim(t)=="")return"El valor es requerido";var i=r(this);if(i)return i}});n(".id_banco").editable({emptytext:"Seleccione",source:[{value:22,text:"BANCO DE FINANZAS"},{value:4,text:"BANCENTRO"},],validate:function(t){if(n.trim(t)=="")return"El valor es requerido";var r=i(this);if(r)return r}});var i=n=>{var t=r(n);return t?t:(t=o(n),t?t:void 0)},r=t=>{let i=n(t).closest("tr").find(positions.tasa_cambio).find("a.editable").editable("getValue").tipo_cambio;if(!isNumber(n.trim(i))||parseInt(i)==0)return"La tasa de cambio no esta seleccionada, selecione una fecha"},o=t=>{let i=n(t).closest("tr").find(positions.tipo_pago).find("a.editable").editable("getValue").tipo_pago_id;if(!isNumber(n.trim(i)))return"Seleccione un tipo de pago válido"};n(".selectorReferencia").editable({emptytext:"Seleccione",validate:function(){var n=i(this);if(n)return n}});n(".tipo_cambio").editable({emptytext:"Sin Datos",validate:function(t){return n.trim(t)==""?"El valor es requerido":isNumber(n.trim(t))?void 0:"El valor debe ser numerico"},display:function(t){n(this).text(numeral(t).format("$0,0.0000"))}});n(".monto_efectivo, .monto_minu, .monto_cheq, .monto_trans").editable({validate:function(t){var r=i(this);return r?r:n.trim(t)==""?"El valor es requerido":isNumber(n.trim(t))?void 0:"El valor debe ser numerico"},display:function(t){n(this).text(numeral(t).format("$0,0.0000"))}});n(".tipo_pago_id").on("save",function(t,i){var f=["tipo_pago","tasa_cambio","fecha","totalD","totalC"],r,u;for(r in positions)f.includes(r)||(r=="referencia"?n(this).closest("tr").find(positions[r]).find("a.editable").editable("setValue","",!0).editable("toggleDisabled",!1):n(this).closest("tr").find(positions[r]).find("a.editable").editable("setValue",0,!0).editable("toggleDisabled",!1));n(this).closest("tr").find(context.getPosition(i.newValue)).find("a.editable").editable("toggleDisabled",!0);i.newValue!=tipoPago.efectivo?(n(this).closest("tr").find(positions.referencia).find("a.editable").editable("toggleDisabled",!0).editable("setValue","",!0),n(this).closest("tr").find(positions.banco).find("a.editable").editable("toggleDisabled",!0).editable("setValue",0,!0).editable("show")):(u=this,setTimeout(function(){n(u).closest("tr").find(positions.monto_efectivo).find("a.editable").editable("show")},400))});n(".id_banco").on("save",function(){n(this).closest("tr").find(positions.referencia).find("a.editable").editable("show")});n(".monto_efectivo, .monto_minu, .monto_cheq, .monto_trans").on("shown",function(t,i){var f=n("#TipoMonedaId").val(),h=n(this).closest("tr").find(positions.tipo_pago).find("a.editable").editable("getValue").tipo_pago_id;let u=n(this).closest("tr").find(positions.tasa_cambio).find("a.editable").editable("getValue").tipo_cambio;var e=detalle.reduce(function(n,t){return+n+ +t.montodolar},0),o=n(this).closest("tr").find(positions.fecha).attr("id-source"),s=referencias.filter(n=>n.idSource!=o).reduce(function(n,t){return+n+ +t.totalD},0),r=e-s;f==context.tipoMoneda.cordoba&&isNumber(u)&&(r=parseFloat(u)*r);i.input.postrender=function(){parseFloat(i.input.$input[0].value)==0&&(i.input.$input[0].value=parseFloat(r).toFixed(4));i.input.$input.select()}});n(".monto_efectivo, .monto_minu, .monto_cheq, .monto_trans, .tipo_cambio").on("hidden",function(n,t){t==="save"&&calcularDetallePago()});n(".selectorReferencia").on("save",function(){var t=n(this).closest("tr").find(positions.tipo_pago).find("a.editable").editable("getValue").tipo_pago_id;n(this).closest("tr").find(context.getPosition(t)).find("a.editable").editable("show")});n(".selectorFecha").datepicker({autoclose:!0,format:"dd-mm-yyyy",language:"es"});n(".selectorFecha").change(function(){var t=this,i=function(i){userRols.includes(roles.admin)?n(t).closest("tr").find(positions.tasa_cambio).find("a.editable").editable("toggleDisabled",!0).editable("setValue",i.Dolares,!0):n(t).closest("tr").find(positions.tasa_cambio).find("a.editable").editable("toggleDisabled",!1).editable("setValue",i.Dolares,!0)},r=function(){n(t).closest("tr").find(positions.tasa_cambio).find("a.editable").editable("toggleDisabled",!1).editable("setValue","",!0)};findTypeOfficial(this.value,i,r);n(t).closest("tr").find(positions.tipo_pago).find("a.editable").editable("show")});n(".editable2").removeClass("tipo_pago_id").removeClass("id_banco").removeClass("monto_efectivo").removeClass("monto_minu").removeClass("monto_cheq").removeClass("monto_trans").removeClass("tipo_cambio").removeClass("selectorReferencia");n(".datepicker").removeClass("selectorFecha")})};n.fn.dataSourceReference=function(t){return this.each(function(){var i=n(this);n("#referencias tbody tr").remove();t.forEach(t=>{n(i).addNewReference(t)})})};n.fn.addNewServicio=function(t){return this.each(function(){var u=n(this),i,r;n(u).find("tbody").append('<tr><td class="w25"><select class="select40 data-ajax"><option value="">Seleccione<\/option><\/select><\/td><td class="w40 text-center"><a href="#" data-name="precio"  data-original-title="Ingrese el precio" class="editable1 precio">'+(t?t.Precio:"0.00")+'<\/a><\/td><td class="w40"><a href="#" data-name="cantidad" data-original-title="Ingrese la cantidad" class="editable1 cantidad">'+(t?t.Cantidad:"1")+'<\/a><\/td><td class="w40">0.00<\/a><\/td><td><a class="fa fa-remove fa-color-red a-type-cursor" onclick="removeServicio(this);"><\/a><\/td><\/tr>');n(".cantidad").editable({validate:function(t){return n.trim(t)<=0?"El valor debe ser mayor a 0":n.trim(t)==""?"El valor es requerido":isNumber(n.trim(t))?void 0:"El valor debe ser numerico"},display:function(t){n(this).text(parseFloat(t).toFixed(2))}});n(".precio").editable({validate:function(t){return n.trim(t)==""?"El valor es requerido":isNumber(n.trim(t))?void 0:"El valor debe ser numerico"},display:function(t){n(this).text(numeral(t).format("$0,0.0000"))}});n(".precio, .cantidad").on("shown",function(n,t){t.input.postrender=function(){t.input.$input.select()}});n(".precio, .cantidad").on("hidden",function(t,i){i==="save"&&calculate();n(this).closest("td").next("td").find("a.editable").editable("show")});i=n(".data-ajax").selectize({valueField:"Cuenta",labelField:"Nombre",searchField:["Nombre","Cuenta"],options:servicios,create:!1,render:{option:function(n,t){return'<div><span class="title"><span class="cuenta"><i class="fa fa-book"><\/i> '+t(n.Cuenta)+'<\/span><\/span><p class="description"><i class="fa fa-'+(n.TipoCta!=4?"user user":"money money")+'"><\/i> '+t(n.Nombre)+'<\/p><p class="descriptionPadre">'+t(n.padre)+"<\/p><\/div>"},item:function(n,t){return"<div>"+('<span class="name">'+t(n.Nombre)+"<\/span>")+('<span class="account">'+t(n.Cuenta)+"<\/span>")+"<\/div>"}},onDropdownClose:function(t){n(t).closest("td").next("td").find("a.editable").editable("show")}});t&&(r=i[0].selectize,r.setValue(t.CtaContable.substring(4,t.CtaContable.length)));n(".editable1").removeClass("precio").removeClass("cantidad");n(".data-ajax").removeClass("data-ajax")})};n.fn.dataSourceServicio=function(t){return this.each(function(){var i=n(this);n("#servicios tbody tr").remove();t.forEach(t=>{n(i).addNewServicio(t)})})};n.fn.saving=function(){return this.each(function(){var t=n(this);n(t).data("original",n(t).html());n(t).html('Guardando... <span class="fa fa-spinner fa-pulse"><\/span>')})};n.fn.searching=function(){return this.each(function(){var t=n(this);n(t).data("original",n(t).html());n(t).html('Buscando... <span class="fa fa-spinner fa-pulse"><\/span>')})};n.fn.reset=function(){return this.each(function(){var t=n(this);n(t).html('<span class="fa fa-filter"><\/span> Filtrar')})};n.fn.checkbox=function(t){var i=n.extend({label:null,state:"checked",type:"checkbox","class":null,value:""},t);return this.each(function(){var t=n(this),r=`<div class="radio">
                        <div class="cntr">
                            <label class="label-cbx" style="font-size: 14px">
                                <i class="${i.class}">${i.label}</i>
                                <input name="status" onchange="${i.onchange}" data-value="${i.value}" type="${i.type}" ${i.state} id="${n(t).attr("id")}" class="ck-item invisible" >
                                <div class="checkbox">
                                    <svg width = "20px" height="20px" viewBox="0 0 20 20">
                                        <path d = "M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>
                                        <polyline points="4 11 8 15 16 6"></polyline>
                                    </svg>
                                </div>
                            </label>
                        </div>
                    </div>`;n(t).parent().html(r)})};n.fn.reset=function(){return this.each(function(){var t=n(this);n(t).html('<span class="fa fa-filter"><\/span> Filtrar')})}}(jQuery);findTypeOfficial=(n,t,i)=>{var r=moment(n,"DD-MM-YYYY").utc().format();$.get(pathBase+"IngresosEgresosCajas/FindTipoCambio",{fecha:r},t,"json").fail(i)};var removeServicio=n=>remove(n,calculate),removeReferencia=n=>remove(n,calcularDetallePago),remove=(n,t)=>{function i(){$(n).parent().parent().remove();t()}$(n).parent().parent().addClass("animated fadeOutDown");setTimeout(i,500)};var findEntity=n=>{var t={};return $("."+n).each(function(n,i){(i.tagName=="INPUT"||i.tagName=="SELECT")&&(t[$(i).attr("id")]=i.classList.contains("datepicker")?moment($(i).val(),"DD-MM-YYYY").utc().format():$(i).val())}),t},fieldsIsValid=n=>{var t=!0;return $("."+n).each(function(n,i){if((i.tagName=="INPUT"||i.tagName=="SELECT")&&i.type!="hidden"&&i.dataset.required&&(i.value==""||i.value=="0"||i.value==0||i.value==null)){var r=$(this).data("error-message");r&&($.notification($(this).data("error-message")),t=!1)}}),detalle.length==0&&($.notification("Debe registrar al menos un servicio"),t=!1),referencias.length==0&&($.notification("Debe registrar el detalle de pago"),t=!1),t},calculate=()=>{detalle=[];$("#servicios tbody tr").each(function(){var n=$(this).find("td:eq(0)").find("select").val();if(n.length){let t=$(this).find("td:eq(1)").find("a").editable("getValue").precio,i=$(this).find("td:eq(2)").find("a").editable("getValue").cantidad,r=parseFloat(t)*parseFloat(i);$(this).find("td:eq(3)").html(parseFloat(r).toFixed(4));detalle.push({cta_cuenta:n,montodolar:r,precio:parseFloat(t),cantidad:parseFloat(i)})}});var t=detalle.reduce(function(n,t){return+n+ +t.montocordoba},0),n=detalle.reduce(function(n,t){return+n+ +t.montodolar},0);$(".amountsServicio li:eq(0)").html('<span class="pull-left"><strong>Servicios<\/strong> : <\/span><strong>'+detalle.length+" items<\/strong>");$(".amountsServicio li:eq(1)").html('<span class="pull-left">Total Dólares : <\/span><strong>$ '+numeral(n).format("$0,0.0000")+"<\/strong>")},context={ajax:{get:(n,t,i)=>{$.get(pathBase+n,t,i,"json")},get2:(n,t,i,r=context.ajax.failResult)=>{$.get(pathBase+n,t?t:null,i).fail(r)},post:(n,t,i,r=context.ajax.failResult)=>{$.post(pathBase+n,t?t:null,i).fail(r)},full:(n,t,i,r=context.ajax.failResult,u)=>{$.ajax({url:pathBase+n,type:u,dataType:"json",data:t,success:i,failure:r,error:r})},status:{BadRequest:400,Unauthorized:401,NotFound:404,IServerError:500},failResult:n=>{n.status==context.ajax.status.Unauthorized&&context.redirectToLogin(),n.status==context.ajax.status.IServerError?context.showMessage({responseText:"Error interno de la aplicación"}):context.showMessage(n)}},redirectToLogin:()=>{window.location.href=pathBase+"account/logIn"},showMessage:n=>{$.notification(n.responseText)},tipoMoneda:{cordoba:1,dolar:2},tipoPago:{efectivo:1,cheque:2,minuta:3,trans:4},pagoPosition:{fecha:"td:eq(0)",tipo_pago:"td:eq(1)",banco:"td:eq(2)",referencia:"td:eq(3)",monto_efectivo:"td:eq(4)",monto_minu:"td:eq(6)",monto_cheq:"td:eq(5)",monto_trans:"td:eq(7)",tasa_cambio:"td:eq(8)",totalD:"td:eq(9)",totalC:"td:eq(10)"},getPosition:n=>{return positions[["","monto_efectivo","monto_cheq","monto_minu","monto_trans"][n]]},validate:{validateField:n=>typeof n!="undefined"&&n!=null&&n!=""&&n!="0",validateChange:n=>typeof n!="undefined"&&n.delegateTarget.value!=null&&n.delegateTarget.value!=""&&n.delegateTarget.value!="0",isNumber:n=>isNaN(parseFloat(n))||isFinite(n)},dataConfig:{createConfig:n=>{var t=$.extend({routePrefix:"api/catalogs/",url:"",data:[],route:[],message:"Este campo es requerido",id:"",display:"",entity:"",hasDependency:!1,itemDependency:[],msgAlert:"No hay datos",render:"",ToSave:{required:!1},ToEdit:{required:!1}},n),i={required:!1,rule:()=>!0},r={required:!1,rule:()=>!0};return t.ToSave=$.extend(i,t.ToSave),t.ToEdit=$.extend(r,t.ToEdit),t}}},tipoPago=context.tipoPago,positions=context.pagoPosition,validateModel=n=>{var t=!0;return n&&(n.Idtipopago==3||n.Idtipopago==4||n.Idtipopago==6)&&(referencias.length||(t=!1,$("#btnShowReference").notification("Debe ingresar las referencias de deposito o transferencia",{position:"left"}))),t};$("#TipoMonedaId").change(function(){calcularDetallePago()});var newRecibo=()=>{window.location.href=pathBase+"ingresosEgresosCajas/create"},printReport=()=>{window.open(`${pathBase}ingresosEgresosCajas/print/${Id.value}`,"_blank")},printReportById=(n,t)=>{if(t){var i=t==1?"ingresosegresoscajas/print/":"ingresosEgresosbanco/edit/";window.open(`${pathBase}${i}${n}`,"_blank")}else window.open(`${pathBase}ingresosEgresosCajas/print/${n}`,"_blank")};Array.prototype.sum||(Array.prototype.sum=function(n){"use strict";var t=0;return this.length&&(t=this.reduce(function(t,i){return t+ +i[n]},0)),t});var findSelectize=n=>$selectizies.filter((t,i)=>$(i).attr("id")==n),fillSelect=(n,t,i,r)=>{n.each((n,u)=>{var f=u.selectize,e;f.clearOptions();f.addOption(t);e=!1;t.length==1?f.setValue(t[0].Id):r&&f.setValue(r);i&&(f.clearCache(),f.settings.render=i)})},buildParamters=n=>{var i=null,t;return n&&(t="",$.each(n,function(n,i){var r=$("#"+i).val();t+='"'+i+'":'+(context.validate.isNumber(r)?r:'"'+r+'"')+","}),i=JSON.parse("{"+t.slice(0,-1)+"}")),i},findUrl=(n,t)=>{var r=!0,i=n.url;return n.route.forEach((t,u)=>{var f=$("#"+n.route[u]),e;validate.validateField(f.val())?i=i.replace("{"+n.route[u]+"}",f.val()):(e=findElemt(f[0].id),e&&(showMessageError(e),r=!1))}),$.each(t,function(n,t){i=i.replace("{"+n+"}",t)}),r?n.routePrefix+i:""},buildEntity=n=>{var t=findAllDataOfEntity(n),i,r,u,f;if(modelIsValid(t)){i={};for(const n in t)t.hasOwnProperty(n)&&(r=t[n],u=$("#"+r.id),$(u).hasValue()?i[r.id]=$(u).getValueWithAttr():(f=getValueByTag(u),i[r.id]=f));return i}return null},findAllDataOfEntity=n=>{var i={},t;for(const r in dataConfig)t=dataConfig[r](),t.entity==n&&(i[t.id]=t);return i},modelIsValid=(n,t)=>{var u=!0,i,r;for(const f in n)i=n[f],r=$("#"+i.id),i.ToSave.required&&(value=$(r).hasValue()?$(r).getValueWithAttr():getValueByTag(r),context.validate.validateField($.trim(value))||(showMessageError(i)(t),u=!1));return u},getValueByTag=n=>{var i={A:function(){return $(n).editable("getValue").SA},INPUT:function(){return $(n).val()},SELECT:function(){return this.INPUT()},TEXTAREA:function(){return this.INPUT()}},t=$(n).prop("tagName");if(i.hasOwnProperty(t))return i[t]();TypeError(`El tagName ${t} no pertenece al objeto ValueByTag`)},Formatear=n=>numeral(n.toString().replace(",",".")).format("0,0.00"),showMessageError=n=>function(){var i={SELECT:function(){$("#"+n.id+"-selectized").parent().notification(n.message,"error")},INPUT:function(){$("#"+n.id).notification(n.message,"error")},TEXTAREA:function(){this.INPUT()},A:function(){this.INPUT()}},t=$("#"+n.id).prop("tagName");if(i.hasOwnProperty(t))return i[t]();TypeError(`El tagName ${t} no pertenece al objeto elem`)},hasData=function(n){var t=0;for(k in n.options)t++;return t},bindingData=n=>{for(const r in n)if(n.hasOwnProperty(r)){var t=$("#"+r),i=$(t).prop("tagName");i&&(i=="SELECT"?$(t).loadCatalog({defaultValue:n[r]}):$(t).hasClass("datepicker")?$(t).datepicker("setDate",moment(n[r]).format("DD-MM-YYYY")):$(t).val(n[r]))}};compareOr=n=>{"with":(...t)=>t.some(t=>t==n)};