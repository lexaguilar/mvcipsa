function createPaging(n,t,i){var u="",r;if(t>n){var e=1,o=n,f=Math.floor(n/2);for(i>2&&i<=t-f&&(e=parseInt(i)-f,o=parseInt(i)+f),i>t-f&&(e=t-n+1,o=t),u+=createLeftButton(r,i,"double-left"),u+=createLeftButton(r,i,"left"),r=e;r<=o;r++)u+=createButton(r,i);u+=createRightButton(r,i,"right",t);u+=createRightButton(r,i,"double-right",t)}else for(r=1;r<=t;r++)u+=createButton(r,i);return u}function createLeftButton(n,t,i){var r="";return 1!=t&&(r=getBase().replace("{act?}","").replace("{pag}",i=="double-left"?1:parseInt(t)-1).replace("{pag}",'<span class="fa fa-angle-'+i+' fa-color-black"><\/span>')),r}function createRightButton(n,t,i,r){var u="";return r!=t&&(u=getBase().replace("{act?}","").replace("{pag}",i=="double-right"?r:parseInt(t)+1).replace("{pag}",'<span class="fa fa-angle-'+i+' fa-color-black"><\/span>')),u}function createButton(n,t){return getBase().replace("{act?}",n==t?" active":"").replace("{pag}",n).replace("{pag}",n)}function getBase(){return'<button type="button" class="btn {act?}" onclick="init({pag})">{pag}<\/button>'}function redirect(n){var t=$(n).data("controller"),i=$(n).data("action"),r=$(n).data("currentid");window.location.href=pathBase+getURL([t,i,r])}function remove(n){function t(){$(n).parent().parent().remove();calculate()}$(n).parent().parent().addClass("animated fadeOutDown");setTimeout(t,500)}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}var getURL;(function(n){n.fn.datatable=function(t){var i=n.extend({columnsHead:null,columnsDisplay:null,data:null,pag:0,rows:0,totalRows:0,controller:null,id:null,callback:"redirect",columnsWithFormatDate:[],columnsWithFormatMoney:[]},t);return this.each(function(){var c=n(this),o,f,t,r,e;let u=parseInt(i.rows),s=parseInt(i.pag);if(o="<thead><tr>",n.each(i.columnsHead,function(n,t){o+="<th>"+t+"<\/th>"}),o+="<\/tr><\/thead>",f="<tbody>",t="",i.data.length||(t='<td colspan = "'+i.columnsDisplay.length+'"><div class="alert alert-warning text-center" role="alert">No se encontraron registros<\/div><td>',f+="<tr>"+t+"<\/tr>"),n.each(i.data,function(r,u){t="";n.each(i.columnsDisplay,function(r,f){if(f.type){var e="";n.each(f.buttons,function(n,t){t=="edit"&&(e+='<a href="#" class ="btn btn-primary btn-xs"  onclick="'+i.callback+'(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="edit"   data-currentid="'+u[i.id]+'"  style="" class="tip-top" data-original-title="Editar">  <i style="color:white" class="fa fa-pencil"><\/i><\/a> ');t=="remove"&&(e+='<a href="#" class ="btn btn-danger btn-xs"   onclick="'+i.callback+'(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="delete" data-currentid="'+u[i.id]+'"  style="" class="tip-top" data-original-title="Eliminar"><i style="color:white" class="fa fa-remove"><\/i><\/a> ');t=="otherAction"&&(e+='<a href="#" class ="btn btn-success btn-xs"   onclick="'+i.callback+'(this);" data-controller="'+(i.controller?i.controller:"")+'" data-action="EditRols" data-currentid="'+u[i.id]+'"  style="" class="tip-top" data-original-title="Eliminar"><i style="color:white" class="fa fa-list"><\/i><\/a> ')});t+="<td>"+e+"<\/td>"}else t+=i.columnsWithFormatMoney.includes(f)?"<td>"+numeral(u[f]).format("$0,0.00")+"<\/td>":i.columnsWithFormatDate.includes(f)?"<td>"+moment(u[f]).format("DD-MM-YYYY")+"<\/td>":"<td>"+u[f]+"<\/td>"});f+="<tr>"+t+"<\/tr>"}),f+="<\/tbody>",r=i.totalRows,totalPages=r%u>0?Math.floor(r/u)+1:r/u,e="",r>u){var l=s*u-(u-1),h=s*u,a='<p style="float:left;">Montrando de '+l+" a "+(r<h?r:h)+" de unos "+r+"<\/p>";e+='<tfoot><tr><td colspan="'+i.columnsHead.length+'">'+a+'<div class="btn-group" role="group" aria-label="..." style="float:right;">';e+=createPaging(5,totalPages,i.pag)}e+="<\/div><\/td><\/tr><\/tfoot>";n(c).html(o+f+e)})}})(jQuery);getURL=n=>n.join("/"),function(n){n.fn.addNewRow=function(t){var i="selector"+t;return this.each(function(){var t=n(this);n(t).find("tbody").append('<tr><td class="w25"><select class="select40 data-ajax" data-selector="'+i+'"><option value="">Seleccione<\/option><\/select><\/td><td class="w40 text-center"><a data-name="precio" href="#" data-original-title="Ingrese el precio" class="editable precio '+i+'" customData="'+i+'">0.00<\/a><\/td><td class="w40"><a href="#" data-name="cantidad" data-original-title="Ingrese la cantidad" class="editable cantidad '+i+'" customData="'+i+'">1<\/a><\/td><td class="w40"><a href="#" data-name="montodolar" data-original-title="cantidad en dolares" class="editable dolares '+i+'" customData="'+i+'">0.00<\/a><\/td><td class="w40"><a href="#" data-name="montocordoba" data-original-title="Cantidad en cordobas" class="editable cordobas '+i+'" customData="'+i+'">0.00<\/a><\/td><td><a class="fa fa-remove fa-color-red a-type-cursor" onclick="remove(this);"><\/a><\/td><\/tr>')})};n.fn.saving=function(){return this.each(function(){var t=n(this);n(t).data("original",n(t).html());n(t).html('Guardando... <span class="fa fa-spinner fa-pulse"><\/span>')})};n.fn.searching=function(){return this.each(function(){var t=n(this);n(t).data("original",n(t).html());n(t).html('Buscando... <span class="fa fa-spinner fa-pulse"><\/span>')})};n.fn.reset=function(){return this.each(function(){var t=n(this);n(t).html(n(t).data("original"))})}}(jQuery);var Monto={total:function(){var n=0;return $(".clear-monto").each(function(t,i){n+=i.value}),n},hidden:function(){$(".monto").hide();$(".clear-monto").each(function(n,t){t.value=0})},tipo1:function(){Monto.hidden();$(".Montoefectivo").show()},tipo2:function(){Monto.hidden();$(".Montocheque").show();Monto.showLable("No. cheque:")},tipo3:function(){Monto.hidden();$(".Montominuta").show();Monto.showLable()},tipo4:function(){Monto.hidden();$(".Montotransferencia").show();Monto.showLable()},tipo5:function(){Monto.hidden();$(".Montoefectivo").show();$(".Montocheque").show();Monto.showLable("No.cheque:")},tipo6:function(){Monto.hidden();$(".Montoefectivo").show();$(".Montominuta").show();Monto.showLable()},showLable:function(n){$(".lblNoreferencia").text(n||"Id Referencia:");$(".Cuentabanco").show();$(".Noreferencia").show()}},findEntity=n=>{var t={};return $("."+n).each(function(n,i){(i.tagName=="INPUT"||i.tagName=="SELECT")&&(t[$(i).attr("id")]=i.classList.contains("datepicker")?moment($(i).val(),"DD-MM-YYYY").utc().format():$(i).val())}),t},fieldsIsValid=n=>{var t=!0;return $("."+n).each(function(n,i){if((i.tagName=="INPUT"||i.tagName=="SELECT")&&i.type!="hidden"&&(i.value==""||i.value=="0"||i.value==0||i.value==null)){var r=$(this).data("error-message");console.log(i.id);console.log(r);r&&($.notification($(this).data("error-message")),t=!1)}}),detalle.length==0&&($.notification("Debe registrar el menos un servicio"),t=!1),t},calculate=()=>{detalle=[];$("#servicios tbody tr").each(function(){var n=$(this).find("td:eq(0)").find("select").val();if(n.length){let i=$(this).find("td:eq(1)").find("a").editable("getValue").precio,r=$(this).find("td:eq(2)").find("a").editable("getValue").cantidad,t=i*r,u=t*tasaCambio;$(this).find("td:eq(3)").find("a").editable("setValue",t,!0);$(this).find("td:eq(4)").find("a").editable("setValue",u,!0);detalle.push({cta_cuenta:n,montocordoba:u,montodolar:t,precio:i,cantidad:r})}});var n=detalle.reduce(function(n,t){return+n+ +t.montocordoba},0),t=detalle.reduce(function(n,t){return+n+ +t.montodolar},0);$(".amounts li:eq(0)").html('<span class="pull-left"> Total Dólares : <\/span><strong>$ '+numeral(t).format("$0,0.00")+"<\/strong>");$(".amounts li:eq(1)").html('<span class="pull-left">Total Córdobas : <\/span><strong>C$ '+numeral(n).format("$0,0.00")+"<\/strong>")},context={ajax:{get:(n,t,i)=>{$.get(pathBase+n,t,i,"json")}}};